<!DOCTYPE html>
<html lang="en">
<meta charset="UTF-8">
<title>Tiny Attack Bookmarklet</title>
<style>
body{
  max-width: 720px;
}
ul.faq li:nth-child(odd) {
    font-weight: bold;
	padding-top: 3px;
	padding-bottom: 3px;
}
ul.faq li:nth-child(even) {
  list-style-type: none;
}
</style>
<body>

<header>
<h2>Tiny Attack Bookmarklet</h2>
</header>

<main>
<p>Here you can find a bookmarklet that adds some information to your Tiny Attack game as shown below.</p>

<a href="#" onClick="window.open('preview.png');return false;">
<img src="preview.png" alt="Preview" width="640" style="border: 1px solid #000"/>
</a>

<p>There are two ways to use the bookmarklet:</p>
<ul>
<li>
  <p><strong>As a bookmark</strong> (no plugin needed)</p>
  <p>Add this to your bookmarks using right-click:
    <a href="javascript:(function()%7B(()%3D%3E%7B%22use%20strict%22%3Bconst%20t%3Ddocument%2Ce%3Dt.createElement.bind(t)%2Cs%3Dt.createTextNode.bind(t)%2Ci%3D(t%2Ce)%3D%3Et.appendChild(e)%3Bclass%20n%7Bt%3Bi%3Bo%3Bh%3Bconstructor(t%2Ce%2Cs%2Ci)%7Bthis.t%3Dt%2Cthis.i%3De%2Cthis.o%3Ds%2Cthis.h%3Di%7Du()%7Bconst%20t%3De(%22div%22)%3Breturn%20i(t%2Cthis.l())%2Ci(t%2Cthis.m())%2Ct%7Dl()%7Bconst%20t%3De(%22table%22)%3Breturn%20t.style.marginTop%3D%224px%22%2Ct.style.marginBottom%3D%228px%22%2Ci(t%2Cthis.p())%2Cthis.t.I().forEach((e%3D%3Ei(t%2Cthis.T(e))))%2Ct%7Dp()%7Bconst%20t%3D%22%23000%22%2Cs%3De(%22tr%22)%3Bthis.o%26%26i(s%2Cthis.k(%22%24%22%2C%22Coins%22%2Ct))%2Cthis.t.v().forEach((t%3D%3E%7Bconst%20n%3De(%22td%22)%2Cr%3De(%22img%22)%3Br.alt%3Dr.title%3Dthis.t._(t)%2Cr.width%3D48%2Cr.height%3D51%2Cr.src%3Dthis.i.O(this.t.P(t))%2Ci(n%2Cr)%2Ci(s%2Cn)%7D))%2Ci(s%2Cthis.k(%22INC%22%2C%22Income%22%2Ct))%2Ci(s%2Cthis.k(%22STR%22%2C%22Army%20Strength%22%2Ct))%2Ci(s%2Cthis.k(%22POT%22%2C%22Army%20Potential%22%2Ct))%3Bconst%20n%3Dthis.k(%22STR%2FPOT%22%2C%22STR%2FPOT%22%2Ct)%3Breturn%20n.innerHTML%3D%22%3Csup%3ESTR%3C%2Fsup%3E%26frasl%3B%3Csub%3EPOT%3C%2Fsub%3E%22%2Ci(s%2Cn)%2Cs%7DT(t)%7Bconst%20s%3De(%22tr%22)%3Bs.style.backgroundColor%3Dthis.t.B(t)%2Cs.style.border%3D%221px%20solid%20black%22%2Cthis.o%26%26i(s%2Cthis.k(this.t.R(t)))%2Cthis.t.v().forEach((e%3D%3Ei(s%2Cthis.k(this.t.M(t%2Ce)))))%3Bconst%20n%3Dthis.t.S(t)%2Cr%3Dthis.t.C(t)%2Ca%3Dthis.t.L(t)%3Breturn%20i(s%2Cthis.k(n))%2Ci(s%2Cthis.k(Math.round(r)))%2Ci(s%2Cthis.k(a))%2Ci(s%2Cthis.k(0%3D%3D%3Da%3F%22-%22%3AMath.round(100*r%2Fa)%2B%22%25%22))%2Cs%7Dk(t%2Cn%2Cr%3D%22%23fff%22)%7Bconst%20a%3De(%22td%22)%3Bn%26%26(a.title%3Dn)%2Ci(a%2Cs(%22number%22%3D%3Dtypeof%20t%3Ft.toLocaleString()%3At))%3Bconst%20o%3Da.style%3Breturn%20o.color%3Dr%2Co.fontSize%3D%2214px%22%2Co.fontWeight%3D%22bolder%22%2Co.textAlign%3D%22center%22%2Co.padding%3D%224px%208px%22%2Ca%7Dm()%7Bconst%20t%3De(%22div%22)%3Breturn%20i(t%2Cthis.N())%2Ci(t%2Cs(%22%20%22))%2Ci(t%2Cthis.W())%2Ct%7DN()%7Bconst%20t%3De(%22a%22)%3Bt.href%3D%22https%3A%2F%2Fta-bs.github.io%2F%3Fcache%3D%22%2Bthis.t.A()%2Ct.target%3D%22_blank%22%2Ct.classList.add(%22btn%22%2C%22btn-primary%22%2C%22w-lg-auto%22)%3Bconst%20n%3De(%22span%22)%3Breturn%20n.classList.add(%22fa%22%2C%22fa-external-link-alt%22)%2Ci(t%2Cn)%2Ci(t%2Cs(%22%20Open%20Battle%20Simulator%22))%2Ct%7DW()%7Bconst%20t%3De(%22button%22)%3Bt.classList.add(%22btn%22%2C%22btn-primary%22%2C%22w-lg-auto%22)%2Ct.addEventListener(%22click%22%2C(()%3D%3E%7Bt.disabled%3D!0%2Cthis.h()%7D))%3Bconst%20n%3De(%22span%22)%3Breturn%20n.classList.add(%22fa%22%2C%22fa-redo%22)%2Ci(t%2Cn)%2Ci(t%2Cs(%22%20Refresh%22))%2Ct%7D%7Dconst%20r%3D(t%2Ce)%3D%3E%22https%3A%2F%2Fcdn.tinyattack.com%2Fimg%2Fskin%2F%22%2Bt%2B%22%2F%22%2Be%2B%22.png%3Ft%3D0%22%3Bclass%20a%7BO(t)%7Breturn%20r(t%2C0)%7D%7Dclass%20o%7BO(t)%7Bconst%20e%3DMath.floor(12*Math.random()%2B1)%3Breturn%20r(t%2Ce)%7D%7Dclass%20c%7BD%3BH%3Bconstructor(t%2Ce)%7Bthis.D%3Dt%2Cthis.H%3De%7DU()%7Breturn%20this.D.U%7DA()%7Breturn%20this.D.A%7Dj()%7Breturn%20this.D.j%7DI()%7Breturn%20this.H.I()%7DB(t)%7Breturn%20this.D.B(t)%7DR(t)%7Breturn%20this.H.J(t)%7DS(t)%7Blet%20e%3Dthis.D.%24%3Breturn%20e%2B%3Dthis.H.q(t)*this.D.F%2Cthis.H.G(t).forEach((t%3D%3E%7Bthis.D.K(t.x%2Ct.y)%3Fe%2B%3DMath.floor(25*t.V%2F10)%3Athis.D.X(t.x%2Ct.y)%26%26(e%2B%3DMath.floor(75*t.V%2F10))%7D))%2Ce%7DC(t)%7Breturn%20this.H.units(t).map((t%3D%3E%7Bconst%20e%3Dthis.D.unitType(t.Y)%3Breturn%20e%3Fe.Z*t.V%2F10%3A0%7D)).reduce(((t%2Ce)%3D%3Et%2Be)%2C0)%7DL(t)%7Breturn%20this.H.units(t).map((t%3D%3Ethis.D.unitType(t.Y)%3F.Z%3F%3F0)).reduce(((t%2Ce)%3D%3Et%2Be)%2C0)%7DM(t%2Ce)%7Breturn%20this.H.M(t%2Ce)%7Dv()%7Bconst%20t%3D%5B%22LandLight%22%2C%22LandHeavy%22%2C%22AirLight%22%2C%22AirHeavy%22%2C%22WaterLight%22%2C%22WaterHeavy%22%2C%22WaterStealth%22%5D%3Breturn%20this.D.tt().sort(((e%2Cs)%3D%3E%7Bconst%20i%3Dt.indexOf(e.et)%2Cn%3Dt.indexOf(s.et)%3Breturn%20i%3D%3D%3Dn%3Fe.Z-s.Z%3Ai-n%7D)).map((t%3D%3Et.Y)).filter((t%3D%3Ethis.H.M(void%200%2Ct)%3E0))%7D_(t)%7Breturn%20this.D.unitType(t)%3F.title%3F%3F%22%22%7DP(t)%7Breturn%20this.D.unitType(t)%3F.st%3F%3F0%7D%7Dclass%20h%7Bit%3Bconstructor(t)%7Bthis.it%3Dt%7Dnt()%7Bconst%20t%3Dthis.it.game.key.indexOf(%22round%22)%3Breturn%20this.it.game.data%5B0%5D%5Bt%5D%7Drt()%7Bconst%20t%3Dthis.it.player.key.indexOf(%22active%22)%3Breturn%20this.it.player.data.findIndex((e%3D%3E!0%3D%3D%3De%5Bt%5D))%7DI()%7Bconst%20t%3Dthis.it.player.data.length%3Breturn%5B1%2C2%2C3%2C4%2C5%2C6%2C7%2C8%2C9%2C10%2C11%2C12%5D.slice(0%2Ct)%7DJ(t)%7Bconst%20e%3Dthis.it.player.key.indexOf(%22coin%22)%3Breturn%20this.it.player.data%5Bt-1%5D%5Be%5D%7Dq(t)%7Bconst%20e%3Dthis.it.coordinate.key.indexOf(%22tilePlayer%22)%3Breturn%20this.it.coordinate.data.map((t%3D%3Et%5Be%5D)).filter((e%3D%3Ee%3D%3D%3Dt)).length%7DM(t%2Ce)%7Bconst%20s%3Dthis.it.coordinate.key.indexOf(%22unitId%22)%2Ci%3Dthis.it.coordinate.key.indexOf(%22unitPlayer%22)%3Breturn%20this.it.coordinate.data.filter((e%3D%3Evoid%200%3D%3D%3Dt%7C%7Ce%5Bi%5D%3D%3D%3Dt)).filter((t%3D%3Et%5Bs%5D%3D%3D%3De)).length%7Dunits(t)%7Bconst%5Be%2Cs%2Ci%2Cn%2Cr%5D%3D%5B%22x%22%2C%22y%22%2C%22unitId%22%2C%22unitHealth%22%2C%22unitPlayer%22%5D.map((t%3D%3Ethis.it.coordinate.key.indexOf(t)))%3Breturn%20this.it.coordinate.data.filter((e%3D%3Evoid%200%3D%3D%3Dt%7C%7Ce%5Br%5D%3D%3D%3Dt)).map((t%3D%3E(%7BY%3At%5Bi%5D%2Cot%3At%5Br%5D%2Cx%3At%5Be%5D%2Cy%3At%5Bs%5D%2CV%3At%5Bn%5D%7D)))%7DG(t)%7Breturn%20this.units(t).filter((t%3D%3E40%3D%3D%3Dt.Y))%7D%7Dconst%20u%3D(t%2Ce%2Cs)%3D%3E%7Bconst%20i%3Dt.match(e)%3Bif(null%3D%3D%3Di)throw%20Error(%22problem%20parsing%20html%20for%20%22%2Bs)%3Breturn%20JSON.parse(i%5B1%5D)%7D%3Bclass%20l%7Bct%3Bconstructor(t)%7Bthis.ct%3Dt%7Dget%20U()%7Breturn%20this.ct.U%7Dget%20A()%7Breturn%20this.ct.A%7Dget%20j()%7Breturn%20this.ct.j%7Dget%20%24()%7Breturn%20this.ct.%24%7Dget%20F()%7Breturn%20this.ct.F%7Dtt()%7Bconst%5Bt%2Ce%2Cs%2Ci%2Cn%2Cr%5D%3D%5B%22unitId%22%2C%22skinId%22%2C%22coin%22%2C%22title%22%2C%22type%22%2C%22weight%22%5D.map((t%3D%3Ethis.ct.units.key.indexOf(t)))%3Breturn%20this.ct.units.data.map((a%3D%3E(%7BY%3Aa%5Bt%5D%2Ctitle%3Aa%5Bi%5D%2CZ%3Aa%5Bs%5D%2Cst%3Aa%5Be%5D%2Cet%3Aa%5Bn%5D%2Ba%5Br%5D%7D)))%7DunitType(t)%7Bconst%5Be%2Cs%2Ci%2Cn%2Cr%2Ca%5D%3D%5B%22unitId%22%2C%22skinId%22%2C%22coin%22%2C%22title%22%2C%22type%22%2C%22weight%22%5D.map((t%3D%3Ethis.ct.units.key.indexOf(t)))%2Co%3Dthis.ct.units.data.find((s%3D%3Es%5Be%5D%3D%3D%3Dt))%3Bif(o)return%7BY%3Ao%5Be%5D%2Ctitle%3Ao%5Bn%5D%2CZ%3Ao%5Bi%5D%2Cst%3Ao%5Bs%5D%2Cet%3Ao%5Br%5D%2Bo%5Ba%5D%7D%7DB(t)%7Breturn%20this.ct.ht%5Bt%5D.hex.darker%7DK(t%2Ce)%7Breturn%207%3D%3D%3Dthis.ut(t%2Ce)%7DX(t%2Ce)%7Breturn%2020%3D%3D%3Dthis.ut(t%2Ce)%7Dut(t%2Ce)%7Bconst%20s%3Dthis.ct.lt.key.indexOf(%22x%22)%2Ci%3Dthis.ct.lt.key.indexOf(%22y%22)%2Cn%3Dthis.ct.lt.key.indexOf(%22tileId%22)%2Cr%3Dthis.ct.lt.data.find((n%3D%3En%5Bs%5D%3D%3D%3Dt%26%26n%5Bi%5D%3D%3D%3De))%3Breturn%20r%3Fr%5Bn%5D%3Avoid%200%7D%7Dfunction%20d(t)%7Bconst%20e%3Ddocument%2Cs%3D%22tabsbm%22%2Ci%3Dnew%20l(t(e.documentElement.outerHTML))%3B(async%20t%3D%3E(await%20fetch(%22https%3A%2F%2Fcdn.tinyattack.com%2Fgame%2F%22%2Bt%2B%22%2Fpublic.json%22)).json())(i.U).then((r%3D%3E%7Bconst%20u%3Dnew%20h(r)%2Cl%3Dnew%20c(i%2Cu)%2Cm%3D5%3D%3D%3D(new%20Date).getMonth()%3Fnew%20o%3Anew%20a%2Cp%3Dnew%20n(l%2Cm%2C176%3D%3D%3Dl.j()%2C(()%3D%3Ed(t))).u()%3Bp.id%3Ds%2Cp.style.marginBottom%3D%2212px%22%2Cp.style.zIndex%3D%222%22%3Bconst%20I%3De.getElementById(s)%2Cg%3De.getElementById(%22game%22)%2Cy%3Dg%3F.parentElement%3Bg%26%26y%3F(I%26%26y.removeChild(I)%2Cy.insertBefore(p%2Cg))%3Aconsole.warn(%22html%20borked%22)%7D))%7Dif(window.location.href.startsWith(%22https%3A%2F%2Fwww.tinyattack.com%2Fgame%2Fview.html%3FgameId%3D%22))console.log(%22tabsbm%20using%20normal%20interface%22)%2Cd((t%3D%3E(t%3D%3E(%7BU%3Au(t%2C%2F'gameId'%3A%20(%5Cd%2B)%2F%2C%22gameId%22)%2CA%3Au(t%2C%2F'cacheId'%3A%20(-%3F%5Cd%2B)%2F%2C%22cacheId%22)%2Cj%3Au(t%2C%2F'playerId'%3A%20(%5Cd%2B)%2F%2C%22playerId%22)%2C%24%3Au(t%2C%2F'coinTurn'%3A%20(%5Cd%2B)%2F%2C%22coinTurn%22)%2CF%3Au(t%2C%2F'coinBase'%3A%20(%5Cd%2B)%2F%2C%22coinBase%22)%2Cdt%3Au(t%2C%2F%2C%20'tile'%3A%20(%5C%7B%5B%5E%7D%5D%2B%5C%7D)%2C%2F%2C%22tile%22)%2Clt%3Au(t%2C%2Fgame.getMap%5C(%5C).addCoordinates%5C((%5C%7B%5B%5E%7D%5D%2B%5C%7D%5C%7D%3F)%2C%2F%2C%22coordinates%22)%2Cunits%3Au(t%2C%2F%2C%20'unit'%3A%20(%5C%7B%5B%5E%7D%5D%2B%5C%7D)%2C%2F%2C%22unit%22)%2Cht%3Au(t%2C%2F'colors'%3A%20(%5C%5B%5B%5E%5C%5D%5D%2B%5C%5D)%2F%2C%22colors%22)%7D))(t)))%3Belse%20if(window.location.href.startsWith(%22https%3A%2F%2Fwww.tinyattack.com%2Fgame%2Ftest.html%3FgameId%3D%22))%7Bconsole.log(%22tabsbm%20using%20experimental%20interface%22)%3Bconst%20t%3Ddocument%3Bt.getElementById(%22game%22).style.position%3D%22relative%22%2Ct.getElementById(%22game-map%22).classList.remove(%22bottom-0%22)%2Ct.getElementById(%22game-panel%22).classList.remove(%22h-100%22)%3Bconst%20e%3Dt.getElementById(%22game-hud%22).firstElementChild%3Be.classList.remove(%22h-100%22)%2Ce.style.height%3D%22100vh%22%2Cd((t%3D%3E(t%3D%3E(%7BU%3Au(t%2C%2FgameId%3A%20(%5Cd%2B)%2C%2F%2C%22gameId%22)%2CA%3Au(t%2C%2FcacheId%3A%20(-%3F%5Cd%2B)%2C%2F%2C%22cacheId%22)%2Cj%3Au(t%2C%2FplayerId%3A%20(%5Cd%2B)%2C%2F%2C%22playerId%22)%2C%24%3Au(t%2C%2FcoinTurn%3A%20(%5Cd%2B)%2C%2F%2C%22coinTurn%22)%2CF%3Au(t%2C%2FcoinBase%3A%20(%5Cd%2B)%2C%2F%2C%22coinBase%22)%2Cdt%3Au(t%2C%2Ftile%3A%20(%5C%7B%5B%5E%7D%5D%2B%5C%7D)%2C%2F%2C%22tile%22)%2Clt%3Au(t%2C%2Fdata%3A%20(%5C%7B%5B%5E%7D%5D%2B%5C%7D)%2C%2F%2C%22coordinates%22)%2Cunits%3Au(t%2C%2Funit%3A%20(%5C%7B%5B%5E%7D%5D%2B%5C%7D)%2C%2F%2C%22unit%22)%2Cht%3Au(t%2C%2Fcolors%3A%20(%5C%5B%5B%5E%5C%5D%5D%2B%5C%5D)%2F%2C%22colors%22)%7D))(t)))%7D%7D)()%3B%7D)()%3B">
      Tiny Attack Bookmarklet
    </a>
  </p>
  <p>Then use the bookmark whenever you are in a Tiny Attack game.</p>
  <p>This does not need any plugin in your browser, but you have to use the bookmark manually every time.</p>
  <p>Also, you will not notice if improved versions of the bookmarklet are released.</p>
</li>
<li>
  <p><strong>As a userscript</strong> (requires plugin)</p>
  <p>With a userscript, you can have the bookmarklet be applied automatically in all your games. In addition, you can use the integrated update feature.</p>
  <p>First, you need to have a userscript plugin installed in your browser, for example Greasemonkey, Tampermonkey, or Violentmonkey.</p>
  <p>Then you can install the bookmarklet: <a href="tabm.user.js">Install userscript</a></p>
</li>
</ul>


<section>
<h3>FAQ</h3>
<ul class="faq">
    <li>What does 'INC' mean?</li>
    <li>'INC' is the income of that player.</li>
    <li>What does 'STR' mean?</li>
    <li>'STR' is the current army strength, that is the sum of the cost of each unit, reduced proportionally for damaged units. Example: A Striker (which costs 200) with 6 health contributes a value of 120 to STR.</li>
    <li>What does 'POT' mean?</li>
    <li>'POT' is the army potential, that is the strength the army will have when all units are at full health.</li>
	<li>The numbers do not update properly!</li>
    <li>Everything that can still be undone (like building units) is not reflected in the numbers.</li>
    <li>Is it safe?</li>
    <li>The bookmarklet runs in your browser. I did not do anything malicious, but you'll have to trust me.</li>
</ul>
</section>
</main>

</body>
</html>